


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation franÃ§aise pour OroCommerce">
      
      
      
        <meta name="author" content="Kiboko">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.1">
    
    
      
        <title>Functionnal - orocommerce-cheatsheet</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a676eddb.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tests-fonctionnels" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="orocommerce-cheatsheet" class="md-header-nav__button md-logo" aria-label="orocommerce-cheatsheet">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            orocommerce-cheatsheet
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Functionnal
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/kiboko-labs/orocommerce-cheatsheet/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="orocommerce-cheatsheet" class="md-nav__button md-logo" aria-label="orocommerce-cheatsheet">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    orocommerce-cheatsheet
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/kiboko-labs/orocommerce-cheatsheet/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Useful commands
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Useful commands" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Useful commands
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../command/oro1/" title="Oro 1.x" class="md-nav__link">
      Oro 1.x
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../command/oro3/" title="Oro 3.x" class="md-nav__link">
      Oro 3.x
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Backend tips
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Backend tips" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Backend tips
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../backend/remove-price-filter/" title="Remove Price filter and sorter" class="md-nav__link">
      Remove Price filter and sorter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Comment crÃ©er un EventListener pour modifier une DataGrid
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Comment crÃ©er un EventListener pour modifier une DataGrid" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Comment crÃ©er un EventListener pour modifier une DataGrid
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../backend/event-listener-datagrid-structure/" title="Orm Result" class="md-nav__link">
      Orm Result
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../backend/event-listener-datagrid-structure/" title="Structure" class="md-nav__link">
      Structure
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../backend/dynamic-action-datagrid/" title="GÃ©rer dynamiquement des actions dans une datagrid" class="md-nav__link">
      GÃ©rer dynamiquement des actions dans une datagrid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../backend/pass-param-to-datagrid/" title="Faire passer un paramÃ¨tre Ã  une datagrid" class="md-nav__link">
      Faire passer un paramÃ¨tre Ã  une datagrid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../backend/delete-entity/" title="Comment supprimer proprement une entitÃ©" class="md-nav__link">
      Comment supprimer proprement une entitÃ©
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../backend/handler-provider-update/" title="Faire des handlers / providers (update entity)" class="md-nav__link">
      Faire des handlers / providers (update entity)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../backend/oro-config-select-type/" title="Champ select en config" class="md-nav__link">
      Champ select en config
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Frontend tips
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Frontend tips" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Frontend tips
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../frontend/BlockTypes/" title="BlockTypes examples" class="md-nav__link">
      BlockTypes examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../frontend/ElementList/" title="List of Ui element present in OroUIBundle::macros.html.twig" class="md-nav__link">
      List of Ui element present in OroUIBundle::macros.html.twig
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../frontend/findblockname/" title="Find Twig Template block names" class="md-nav__link">
      Find Twig Template block names
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../frontend/mass-actions/" title="Ajouter une Mass-Action sur la grille des produits" class="md-nav__link">
      Ajouter une Mass-Action sur la grille des produits
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../frontend/form/" title="Create a frontend form for an entity" class="md-nav__link">
      Create a frontend form for an entity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../frontend/consent-rgpd/" title="RGPD" class="md-nav__link">
      RGPD
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Environment tips
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Environment tips" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Environment tips
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../environment/installer-xdebug-php71/" title="Installer Xdebug pour php 7.1 sur MacOS" class="md-nav__link">
      Installer Xdebug pour php 7.1 sur MacOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../environment/installer-rabbitmq-brew/" title="Installer RabbitMQ avec Brew sur MacOS" class="md-nav__link">
      Installer RabbitMQ avec Brew sur MacOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../environment/avoir-xdebug-a-la-demande/" title="Activer XDebug Ã  la demande" class="md-nav__link">
      Activer XDebug Ã  la demande
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../environment/supervisor/" title="Utilisation de Supervisor" class="md-nav__link">
      Utilisation de Supervisor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../environment/composer-tips/" title="Utilisation de composer" class="md-nav__link">
      Utilisation de composer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../postgresql/insert-medias/" title="Insert product medias in the database" class="md-nav__link">
      Insert product medias in the database
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../postgresql/sql-tips/" title="Pour identifier les tables lourdes" class="md-nav__link">
      Pour identifier les tables lourdes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Migration tips
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Migration tips" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Migration tips
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../migrations/introduction/" title="Introduction schema manipulation" class="md-nav__link">
      Introduction schema manipulation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../migrations/enum/" title="Managing enums" class="md-nav__link">
      Managing enums
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../migrations/businessUnit/" title="Extending an entity (Business Unit example)" class="md-nav__link">
      Extending an entity (Business Unit example)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../migrations/view/" title="Managing the fields order on the form view" class="md-nav__link">
      Managing the fields order on the form view
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../migrations/configuration/" title="Configuring the platform via migrations" class="md-nav__link">
      Configuring the platform via migrations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../migrations/delete-completely-an-enum/" title="Delete completely an enum" class="md-nav__link">
      Delete completely an enum
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Docker tips
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Docker tips" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Docker tips
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker/dump-sql-docker/" title="Maninipuler des dumps.sql avec Docker" class="md-nav__link">
      Maninipuler des dumps.sql avec Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker/use-cache/" title="Utiliser le cache Docker" class="md-nav__link">
      Utiliser le cache Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker/clean-vm/" title="Nettoyer sa VM" class="md-nav__link">
      Nettoyer sa VM
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Test tips
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Test tips" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Test tips
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../intro/" title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../behat/" title="Behat" class="md-nav__link">
      Behat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../javascript/" title="Javascript" class="md-nav__link">
      Javascript
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Functionnal
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="Functionnal" class="md-nav__link md-nav__link--active">
      Functionnal
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quand-rediger-les-tests-fonctionnels" class="md-nav__link">
    Quand rÃ©diger les tests fonctionnels
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environnement-de-test" class="md-nav__link">
    Environnement de test
  </a>
  
    <nav class="md-nav" aria-label="Environnement de test">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialisation-du-client-et-avertissement-quand-aux-chargement-des-fixtures" class="md-nav__link">
    Initialisation du client et avertissement quand aux chargement des fixtures
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-dun-environnement-de-test" class="md-nav__link">
    Configuration d'un environnement de test
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-isolation" class="md-nav__link">
    Database Isolation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chargement-des-data-fixtures" class="md-nav__link">
    Chargement des data fixtures :
  </a>
  
    <nav class="md-nav" aria-label="Chargement des data fixtures :">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    NOTES :
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ecrire-des-test-fonctionnel" class="md-nav__link">
    Ecrire des test fonctionnel :
  </a>
  
    <nav class="md-nav" aria-label="Ecrire des test fonctionnel :">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tests-fonctionnel-pour-les-controlleurs" class="md-nav__link">
    Tests fonctionnel pour les controlleurs :
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-prepraration-du-client" class="md-nav__link">
    Exemples de prÃ©praration du client :
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types-de-tests-fonctionnels" class="md-nav__link">
    Types de tests fonctionnels
  </a>
  
    <nav class="md-nav" aria-label="Types de tests fonctionnels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tester-les-controllers" class="md-nav__link">
    Tester les controllers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tester-les-acls-dans-les-controlleurs" class="md-nav__link">
    Tester les ACLs dans les controlleurs :
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tester-les-commandes" class="md-nav__link">
    Tester les commandes :
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#voir-aussi" class="md-nav__link">
    VOIR AUSSI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tester-les-services-ou-les-repositories" class="md-nav__link">
    Tester les services ou les Repositories
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-de-test-fonctionnel" class="md-nav__link">
    Example de test fonctionnel :
  </a>
  
    <nav class="md-nav" aria-label="Example de test fonctionnel :">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attention" class="md-nav__link">
    Attention
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quand-rediger-les-tests-fonctionnels" class="md-nav__link">
    Quand rÃ©diger les tests fonctionnels
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environnement-de-test" class="md-nav__link">
    Environnement de test
  </a>
  
    <nav class="md-nav" aria-label="Environnement de test">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialisation-du-client-et-avertissement-quand-aux-chargement-des-fixtures" class="md-nav__link">
    Initialisation du client et avertissement quand aux chargement des fixtures
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-dun-environnement-de-test" class="md-nav__link">
    Configuration d'un environnement de test
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-isolation" class="md-nav__link">
    Database Isolation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chargement-des-data-fixtures" class="md-nav__link">
    Chargement des data fixtures :
  </a>
  
    <nav class="md-nav" aria-label="Chargement des data fixtures :">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    NOTES :
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ecrire-des-test-fonctionnel" class="md-nav__link">
    Ecrire des test fonctionnel :
  </a>
  
    <nav class="md-nav" aria-label="Ecrire des test fonctionnel :">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tests-fonctionnel-pour-les-controlleurs" class="md-nav__link">
    Tests fonctionnel pour les controlleurs :
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-de-prepraration-du-client" class="md-nav__link">
    Exemples de prÃ©praration du client :
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types-de-tests-fonctionnels" class="md-nav__link">
    Types de tests fonctionnels
  </a>
  
    <nav class="md-nav" aria-label="Types de tests fonctionnels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tester-les-controllers" class="md-nav__link">
    Tester les controllers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tester-les-acls-dans-les-controlleurs" class="md-nav__link">
    Tester les ACLs dans les controlleurs :
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tester-les-commandes" class="md-nav__link">
    Tester les commandes :
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#voir-aussi" class="md-nav__link">
    VOIR AUSSI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tester-les-services-ou-les-repositories" class="md-nav__link">
    Tester les services ou les Repositories
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-de-test-fonctionnel" class="md-nav__link">
    Example de test fonctionnel :
  </a>
  
    <nav class="md-nav" aria-label="Example de test fonctionnel :">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attention" class="md-nav__link">
    Attention
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/kiboko-labs/orocommerce-cheatsheet/edit/master/docs/tests/functional.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>
                  </a>
                
                
                  
                
                
                <h1 id="tests-fonctionnels">Tests fonctionnels</h1>
<p>Les tests fonctionnels permettent de vÃ©rifier lâintÃ©gration des diffÃ©rentes couches dâune application.</p>
<p>Dans cet article, vous apprendrez comment vous pouvez amÃ©liorer lâexpÃ©rience de la rÃ©daction de tests fonctionnels avec
Oroplatform. Il est recommandÃ© de lire la <a href="https://symfony.com/doc/4.4/testing.html#functional-tests">Doc Symfony</a>
concernant les tests avant de continuer. Vous devriez Ã©galement connaÃ®tre <a href="https://phpunit.de/getting-started/phpunit-9.html">PhpUnit</a></p>
<h2 id="quand-rediger-les-tests-fonctionnels">Quand rÃ©diger les tests fonctionnels</h2>
<p>Les tests fonctionnels sont gÃ©nÃ©ralement rÃ©digÃ©s pour les :</p>
<p>ContrÃ´leurs
Commandes
DÃ©pÃ´ts
Autres services</p>
<p>Lâobjectif des tests fonctionnels nâest pas de tester des classes sÃ©parÃ©es (tests unitaires), mais de tester
lâintÃ©gration des diffÃ©rentes parties dâune application.</p>
<p>Ajouter des tests fonctionnels pour complÃ©ter les tests unitaires pour les raisons suivantes :</p>
<ul>
<li>Vous pouvez tester le systÃ¨me multi-composants et vous assurer quâil fonctionne comme un tout.</li>
<li>Vous pouvez Ã©viter la simulation(mocking) de lâinterface compliquÃ©e ou de la couche de manipulation de donnÃ©es
(comme les classes de doctrine pour construire une requÃªte).
Les tests unitaires peuvent rÃ©ussir mÃªme si les fonctionnalitÃ©s ne fonctionnent pas correctement.</li>
</ul>
<h2 id="environnement-de-test">Environnement de test</h2>
<h3 id="initialisation-du-client-et-avertissement-quand-aux-chargement-des-fixtures">Initialisation du client et avertissement quand aux chargement des fixtures</h3>
<p>Pour amÃ©liorer la performance de lâexÃ©cution du test, lâinitialisation dâun client nâest effectuÃ©e quâune seule fois par
cas de test par dÃ©faut. Cela signifie que le noyau de lâapplication Symfony sera dÃ©marrÃ© une fois par cas de test.
Les fixtures sont Ã©galement chargÃ©s une seule fois par cas de test par dÃ©faut. Dâune part, initialiser et charger
des fixtures une fois par cas de test augmente la performance de lâexÃ©cution de test mais peut aussi causer des bugs
car  lâÃ©tat des fixtures et du noyau (et par consÃ©quent, le conteneur de service) sera partagÃ© par dÃ©faut entre les
mÃ©thodes de test de cas de test sÃ©parÃ©s. Assurez-vous de rÃ©initialiser cet Ã©tat si nÃ©cessaire.</p>
<h3 id="configuration-dun-environnement-de-test">Configuration d'un environnement de test</h3>
<p>Vous devez configurer les paramÃ¨tres suivants pour lâenvironnement de test :</p>
<ol>
<li>
<p>CrÃ©er une base de donnÃ©es distincte pour les tests (p. ex., ajouter le suffixe Â« _test Â») :</p>
</li>
<li>
<p>Configurez les paramÃ¨tres hÃ´te, port et authentification pour la base de donnÃ©es, le serveur de messagerie et le
 serveur de socket web dans le fichier parameters_test.yml :</p>
</li>
</ol>
<p>Par exemple :</p>
<pre><code class="yaml"># config/parameters_test.yml
parameters:
    database_host: 127.0.0.1
    database_port: null
    database_name: crm_test
    database_user: root
    database_password: null
    mailer_transport: smtp
    mailer_host: 127.0.0.1
    mailer_port: null
    mailer_encryption: null
    mailer_user: null
    mailer_password: null
    session_handler: null
    locale: en
    secret: ThisTokenIsNotSoSecretChangeIt
    installed: '2014-08-12T09:05:04-07:00'
</code></pre>

<ol>
<li>Installez l'application dans un environnement de test</li>
</ol>
<pre><code>bin/console oro:install 
 --env=test 
 --organization-name=Oro
 --user-name=admin
 --user-email=admin@example.com
 --user-firstname=John
 --user-lastname=Doe
 --user-password=admin
 --sample-data=n
 --application-url=http://localhost
</code></pre>

<p>Lors de lâinstallation, la structure de la base de donnÃ©es est configurÃ©e et les fixtures standard sont chargÃ©s.</p>
<ol>
<li>ExÃ©cuter les tests en utilisant phpunit avec lâoption âtestsuite appropriÃ©e (unit ou functionnal).</li>
</ol>
<p>ATTENTION
Actuellement, lâexÃ©cution de diffÃ©rents types de tests automatisÃ©s ensemble nâest pas prise en charge.
Il est donc fortement dÃ©conseillÃ© dâexÃ©cuter des tests unitaires et des tests fonctionnels cÃ´te Ã  cÃ´te en une seule exÃ©cution, car cela produit des erreurs.
Les tests unitaires crÃ©ent des objets fictifs qui interfÃ¨rent ultÃ©rieurement avec lâexÃ©cution des tests fonctionnels 
et crÃ©ent une ambiguÃ¯tÃ© inutile. Il est possible de dÃ©sactiver les tests unitaires au dÃ©marrage du test Ã  lâaide de lâoption testsuite :</p>
<p>$ php bin/phpunit -c . / --testsuite=functional
$ php bin/phpunit -c . / --testsuite=unit</p>
<h2 id="database-isolation">Database Isolation</h2>
<p>L'annotation @dbIsolationPerTest ajoute une transaction qui sera effectuÃ©e avant le dÃ©but dâun test et qui est annulÃ©e lorsquâun test se termine.</p>
<pre><code class="php">// src/Oro/Bundle/FooBundle/Tests/Functional/FooBarTest.php
namespace Oro\Bundle\FooBundle\Tests\Functional;

use Oro\Bundle\TestFrameworkBundle\Test\WebTestCase;

/**
 * @dbIsolationPerTest
 */
class FooBarTest extends WebTestCase
{
    // ...
}
</code></pre>

<h2 id="chargement-des-data-fixtures">Chargement des data fixtures :</h2>
<p>Utilisez la mÃ©thode loadFixtures() pour charger des donnÃ©es dans un testÂ :</p>
<pre><code class="php">// src/Oro/Bundle/FooBundle/Tests/Functional/FooBarTest.php
namespace Oro\Bundle\FooBundle\Tests\Functional;

use Oro\Bundle\TestFrameworkBundle\Test\WebTestCase;

class FooBarTest extends WebTestCase
{
    protected function setUp()
    {
        $this-&gt;initClient(); // must be called before!

        // loading fixtures will be executed once, use the second parameter
        // $force = true to force the loading
        $this-&gt;loadFixtures([
            'Oro\Bundle\FooBarBundle\Tests\Functional\DataFixtures\LoadFooData',
            '@OroFooBarBundle/Tests/Functional/DataFixtures/bar_data.yml',
        ]);
    }

    // ...
}
</code></pre>

<p>Un fixture doit Ãªtre soit un nom de classe qui implÃ©mente Doctrine\Common\DataFixtures\FixtureInterface , soit un chemin vers le fichier nelmio/alice.</p>
<p>Un exemple de fixtureÂ :</p>
<pre><code class="php">// src/Oro/Bundle/FooBarBundle/Tests/Functional/DataFixtures/LoadFooData.php
namespace Oro\Bundle\FooBarBundle\Tests\Functional\DataFixtures;

use Doctrine\Common\DataFixtures\AbstractFixture;
use Doctrine\Common\Persistence\ObjectManager;
use Oro\Bundle\FooBarBundle\Entity\FooEntity;

class LoadFooData extends AbstractFixture
{
    public function load(ObjectManager $manager)
    {
        $entity = new FooEntity();
        $manager-&gt;persist($entity);
        $manager-&gt;flush();
    }
}
</code></pre>

<pre><code class="yaml">    # src/Oro/Bundle/FooBarBundle/Tests/Functional/DataFixtures/bar_data.yml
    Oro\Bundle\FooBarBundle\Entity\BarEntity:
        bar:
            name: test
</code></pre>

<p>Vous pouvez Ã©galement implÃ©menter lâinterfaceDoctrine\Common\DataFixtures\DependentFixtureInterface qui permet de charger des fixtures en fonction des autres fixtures dÃ©jÃ  chargÃ©esÂ :</p>
<pre><code class="php">// src/Oro/Bundle/FooBarBundle/Tests/Functional/DataFixtures/LoadFooData.php
namespace Oro\Bundle\FooBarBundle\Tests\Functional\DataFixtures;

use Doctrine\Common\DataFixtures\DependentFixtureInterface;
use Doctrine\Common\DataFixtures\AbstractFixture;
use Doctrine\Common\Persistence\ObjectManager;

class LoadFooData extends AbstractFixture implements DependentFixtureInterface
{
    public function load(ObjectManager $manager)
    {
        // load fixtures
    }

    public function getDependencies()
    {
        return ['Oro\Bundle\FooBarBundle\Tests\Functional\DataFixtures\LoadBarData'];
    }
}
</code></pre>

<p>De plus, vous pouvez utiliser des entitÃ©s spÃ©cifiques aux rÃ©fÃ©rences Ã  partir de fixtures, par exempleÂ :</p>
<pre><code class="php">namespace Oro\Bundle\FooBarBundle\Tests\Functional\DataFixtures;

use Doctrine\Common\Persistence\ObjectManager;
use Doctrine\Common\DataFixtures\DependentFixtureInterface;
use Doctrine\Common\DataFixtures\AbstractFixture;

use Oro\Bundle\FooBarBundle\Entity\FooEntity;

class LoadFooData extends AbstractFixture implements DependentFixtureInterface
{
    public function load(ObjectManager $manager)
    {
        $entity = new FooEntity();
        $manager-&gt;persist($entity);
        $manager-&gt;flush();

        $this-&gt;addReference('my_entity', $entity);
    }

    public function getDependencies()
    {
        return ['Oro\Bundle\FooBarBundle\Tests\Functional\DataFixtures\LoadBarData'];
    }
}
</code></pre>

<p>Maintenant, vous pouvez rÃ©fÃ©rencer le fixture par le nom configurÃ© dans votre testÂ :</p>
<pre><code class="php">// src/Oro/Bundle/FooBundle/Tests/Functional/FooBarTest.php
namespace Oro\Bundle\FooBundle\Tests\Functional;

use Oro\Bundle\TestFrameworkBundle\Test\WebTestCase;

class FooBarTest extends WebTestCase
{
    protected $entity;

    protected function setUp()
    {
        $this-&gt;initClient();
        $this-&gt;loadFixtures('Oro\Bundle\FooBarBundle\Tests\Functional\DataFixtures\LoadFooData');
        $this-&gt;entity = $this-&gt;getReference('my_entity');
    }

    // ...
}
</code></pre>

<h3 id="notes">NOTES :</h3>
<ol>
<li>Par dÃ©faut, le gestionnaire dâentitÃ©s est effacÃ© aprÃ¨s le chargement de chaque fixture. Pour Ã©viter le nettoyage une fixture peut implÃ©menterOro\Bundle\TestFrameworkBundle\Test\DataFixtures\InitialFixtureInterface.</li>
<li>Parfois, vous avez besoin dâune rÃ©fÃ©rence Ã  lâOrganization, d'un User ou d'une BusinessUnit. Les fixtures suivants peuvent Ãªtre utilisÃ©s pour les chargerÂ :</li>
<li>Oro\Bundle\TestFrameworkBundle\Tests\Functional\DataFixtures\LoadOrganization</li>
<li>Oro\Bundle\TestFrameworkBundle\Tests\Functional\DataFixtures\LoadUser</li>
<li>Oro\Bundle\TestFrameworkBundle\Tests\Functional\DataFixtures\LoadBusinessUnit</li>
</ol>
<h2 id="ecrire-des-test-fonctionnel">Ecrire des test fonctionnel :</h2>
<p>Pour crÃ©er un test fonctionel :</p>
<ol>
<li>Etendez la classe WebTestCase</li>
<li>PrÃ©parez une instance de la classe Client</li>
<li>PrÃ©parez vos fixtures ( Optionnel)</li>
<li>PrÃ©parez le container</li>
<li>Appelez les fonctionnalitÃ©es du test
6 VÃ©rifiez le rÃ©sultat</li>
</ol>
<h3 id="tests-fonctionnel-pour-les-controlleurs">Tests fonctionnel pour les controlleurs :</h3>
<p>Un test fonctionnel pour un contrÃ´leur se compose de quelques Ã©tapes:</p>
<ol>
<li>Faire une requete</li>
<li>Tester la rÃ©ponse</li>
<li>Cliquez sur un lien ou soumettez un formulaire</li>
<li>Test the response</li>
<li>Nettoyer et rÃ©pÃ©ter</li>
</ol>
<h3 id="exemples-de-prepraration-du-client">Exemples de prÃ©praration du client :</h3>
<p>Lâinitialisation simple fonctionne pour tester les commandes et les services lorsque lâauthentification nâest pas nÃ©cessaire.</p>
<pre><code class="php">// src/Oro/Bundle/FooBundle/Tests/Functional/FooBarTest.php
namespace Oro\Bundle\FooBundle\Tests\Functional;

use Oro\Bundle\TestFrameworkBundle\Test\WebTestCase;

class FooBarTest extends WebTestCase
{
    protected function setUp()
    {
        $this-&gt;initClient(); // initialization occurres only once per test class
        // now varialbe $this-&gt;client is available
    }
    // ...
}
</code></pre>

<p>Initialisation avec les options Appkernel personnalisÃ©esÂ :</p>
<pre><code class="php">// src/Oro/Bundle/FooBundle/Tests/Functional/FooBarTest.php
namespace Oro\Bundle\FooBundle\Tests\Functional;

use Oro\Bundle\TestFrameworkBundle\Test\WebTestCase;

class FooBarTest extends WebTestCase
{
    protected function setUp()
    {
        // first array is Kernel options
        $this-&gt;initClient(['debug' =&gt; false]);
    }
    // ...
}
</code></pre>

<p>Initialisation avec authentificationÂ :</p>
<pre><code class="php">// src/Oro/Bundle/FooBundle/Tests/Functional/FooBarTest.php
namespace Oro\Bundle\FooBundle\Tests\Functional;

use Oro\Bundle\TestFrameworkBundle\Test\WebTestCase;

class FooBarTest extends WebTestCase
{
    protected function setUp()
    {
        // second array is service options
        // this example will create client with server options ['PHP_AUTH_USER' =&gt; 'admin@example.com', 'PHP_AUTH_PW' =&gt; 'admin']
        // make sure you loaded fixture with test user
        // bin/console doctrine:fixture:load --no-debug --append --no-interaction --env=test --fixtures src/Oro/src/Oro/Bundle/TestFrameworkBundle/Fixtures
        $this-&gt;initClient([], $this-&gt;generateBasicAuthHeader());

        // init client with custom username and password
        $this-&gt;initClient([], $this-&gt;generateBasicAuthHeader('custom_username', 'custom_password'));
    }
    // ...
}
</code></pre>

<h2 id="types-de-tests-fonctionnels">Types de tests fonctionnels</h2>
<h3 id="tester-les-controllers">Tester les controllers</h3>
<pre><code class="php">// src/OroCRM/Bundle/TaskBundle/Tests/Functional/Controller/TaskControllersTest.php
namespace Oro\Bundle\TaskBundle\Tests\Functional\Controller;

use Oro\Bundle\TestFrameworkBundle\Test\WebTestCase;

/**
 * @outputBuffering enabled
 */
class TaskControllersTest extends WebTestCase
{
    protected function setUp()
    {
        $this-&gt;initClient([], $this-&gt;generateBasicAuthHeader());
    }

    public function testCreate()
    {
        $crawler = $this-&gt;client-&gt;request('GET', $this-&gt;getUrl('orocrm_task_create'));

        $form = $crawler-&gt;selectButton('Save and Close')-&gt;form();
        $form['orocrm_task[subject]'] = 'New task';
        $form['orocrm_task[description]'] = 'New description';
        $form['orocrm_task[dueDate]'] = '2014-03-04T20:00:00+0000';
        $form['orocrm_task[owner]'] = '1';
        $form['orocrm_task[reporter]'] = '1';

        $this-&gt;client-&gt;followRedirects(true);
        $crawler = $this-&gt;client-&gt;submit($form);
        $result = $this-&gt;client-&gt;getResponse();
        $this-&gt;assertHtmlResponseStatusCodeEquals($result, 200);
        $this-&gt;assertContains('Task saved', $crawler-&gt;html());
    }

    /**
     * @depends testCreate
     */
    public function testUpdate()
    {
        $response = $this-&gt;client-&gt;requestGrid(
            'tasks-grid',
            ['tasks-grid[_filter][reporterName][value]' =&gt; 'John Doe']
        );

        $result = $this-&gt;getJsonResponseContent($response, 200);
        $result = reset($result['data']);

        $crawler = $this-&gt;client-&gt;request(
            'GET',
            $this-&gt;getUrl('orocrm_task_update', ['id' =&gt; $result['id']])
        );

        $form = $crawler-&gt;selectButton('Save and Close')-&gt;form();
        $form['orocrm_task[subject]'] = 'Task updated';
        $form['orocrm_task[description]'] = 'Description updated';

        $this-&gt;client-&gt;followRedirects(true);
        $crawler = $this-&gt;client-&gt;submit($form);
        $result = $this-&gt;client-&gt;getResponse();

        $this-&gt;assertHtmlResponseStatusCodeEquals($result, 200);
        $this-&gt;assertContains('Task saved', $crawler-&gt;html());
    }

    /**
     * @depends testUpdate
     */
    public function testView()
    {
        $response = $this-&gt;client-&gt;requestGrid(
            'tasks-grid',
            ['tasks-grid[_filter][reporterName][value]' =&gt; 'John Doe']
        );

        $result = $this-&gt;getJsonResponseContent($response, 200);
        $result = reset($result['data']);

        $this-&gt;client-&gt;request(
            'GET',
            $this-&gt;getUrl('orocrm_task_view', ['id' =&gt; $result['id']])
        );
        $result = $this-&gt;client-&gt;getResponse();

        $this-&gt;assertHtmlResponseStatusCodeEquals($result, 200);
        $this-&gt;assertContains('Task updated - Tasks - Activities', $result-&gt;getContent());
    }

    /**
     * @depends testUpdate
     */
    public function testIndex()
    {
        $this-&gt;client-&gt;request('GET', $this-&gt;getUrl('orocrm_task_index'));
        $result = $this-&gt;client-&gt;getResponse();
        $this-&gt;assertHtmlResponseStatusCodeEquals($result, 200);
        $this-&gt;assertContains('Task updated', $result-&gt;getContent());
    }
}
</code></pre>

<h3 id="tester-les-acls-dans-les-controlleurs">Tester les ACLs dans les controlleurs :</h3>
<p>Dans cet exemple, un utilisateur sans autorisations suffisantes essaie dâaccÃ©der Ã  une action du contrÃ´leur. La mÃ©thode assertHtmlResponseStatusCodeEquals()
est utilisÃ©e pour sâassurer que lâaccÃ¨s Ã  la ressource demandÃ©e est refusÃ© Ã  lâutilisateur :</p>
<pre><code class="php">namespace Oro\Bundle\UserBundle\Tests\Functional;

use Oro\Bundle\UserBundle\Tests\Functional\DataFixtures\LoadUserData;
use Oro\Bundle\TestFrameworkBundle\Test\WebTestCase;

/**
 * @outputBuffering enabled
 */
class UsersTest extends WebTestCase
{
    protected function setUp()
    {
        $this-&gt;initClient();
        $this-&gt;loadFixtures(['Oro\Bundle\UserBundle\Tests\Functional\API\DataFixtures\LoadUserData']);
    }

    public function testUsersIndex()
    {
        $this-&gt;client-&gt;request(
            'GET',
            $this-&gt;getUrl('oro_user_index'),
            [],
            [],
            $this-&gt;generateBasicAuthHeader(LoadUserData::USER_NAME, LoadUserData::USER_PASSWORD)
        );
        $result = $this-&gt;client-&gt;getResponse();
        $this-&gt;assertHtmlResponseStatusCodeEquals($result, 403);
    }

    public function testGetUsersAPI()
    {
        $this-&gt;client-&gt;request(
            'GET',
            $this-&gt;getUrl('oro_api_get_users'),
            ['limit' =&gt; 100],
            [],
            $this-&gt;generateWsseAuthHeader(LoadUserData::USER_NAME, LoadUserData::USER_API_KEY)
        );
        $result = $this-&gt;client-&gt;getResponse();
        $this-&gt;assertJsonResponseStatusCodeEquals($result, 403);
    }
}
</code></pre>

<p>Voici un exemple de fixture qui ajoute un utilisateur sans permissionÂ :</p>
<pre><code class="php">/ src/Oro/Bundle/UserBundle/Tests/Functional/DataFixtures/LoadUserData.php
namespace Oro\Bundle\UserBundle\Tests\Functional\DataFixtures;

use Doctrine\Common\DataFixtures\AbstractFixture;
use Doctrine\Common\Persistence\ObjectManager;

use Symfony\Component\DependencyInjection\ContainerAwareInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;

use Oro\Bundle\UserBundle\Entity\Role;
use Oro\Bundle\UserBundle\Entity\UserApi;

class LoadUserData extends AbstractFixture implements ContainerAwareInterface
{
    const USER_NAME     = 'user_wo_permissions';
    const USER_API_KEY  = 'user_api_key';
    const USER_PASSWORD = 'user_password';

    private $container;

    public function setContainer(ContainerInterface $container = null)
    {
        $this-&gt;container = $container;
    }

    public function load(ObjectManager $manager)
    {
        /** @var \Oro\Bundle\UserBundle\Entity\UserManager $userManager */
        $userManager = $this-&gt;container-&gt;get('oro_user.manager');

        // Find role for user to able to authenticate in test.
        // You can use any available role that you want dependently on test logic.
        $role = $manager-&gt;getRepository(Role::class)
            -&gt;findOneBy(['role' =&gt; 'IS_AUTHENTICATED_ANONYMOUSLY']);

        // Creating new user
        $user = $userManager-&gt;createUser();

        // Creating API entity for user, we will reference it in testGetUsersAPI method,
        // if you are not going to test API you can skip it
        $api = new UserApi();
        $api-&gt;setApiKey(self::USER_API_KEY)
            -&gt;setUser($user);

        // Creating user
        $user
            -&gt;setUsername(self::USER_NAME)
            -&gt;setPlainPassword(self::USER_PASSWORD) // This value is referenced in testUsersIndex method
            -&gt;setFirstName('Simple')
            -&gt;setLastName('User')
            -&gt;addRole($role)
            -&gt;setEmail('test@example.com')
            -&gt;setApi($api)
            -&gt;setSalt('');

        // Handle password encoding
        $userManager-&gt;updatePassword($user);

        $manager-&gt;persist($user);
        $manager-&gt;flush();
    }
}
</code></pre>

<h3 id="tester-les-commandes">Tester les commandes :</h3>
<p>Lorsque Oroplatform est installÃ©, vous pouvez tester les commandes en utilisant la mÃ©thode runCommand()
de la classe WebTestCase. Cette mÃ©thode exÃ©cute une commande avec des paramÃ¨tres donnÃ©s et retourne sa sortie
sous forme de chaÃ®ne. Par exemple, voyez Ã  quoi ressemble le test pour la classe UpdateSchemaDoctrineListener du SearchBundle :</p>
<pre><code class="php">namespace Oro\Bundle\SearchBundle\Tests\Functional\EventListener;

use Oro\Bundle\TestFrameworkBundle\Test\WebTestCase;

class UpdateSchemaListenerTest extends WebTestCase
{
    protected function setUp()
    {
        $this-&gt;initClient();
    }

    /**
     * @dataProvider commandOptionsProvider
     */
    public function testCommand($commandName, array $params, $expectedContent)
    {
        $result = $this-&gt;runCommand($commandName, $params);
        $this-&gt;assertContains($expectedContent, $result);
    }

    public function commandOptionsProvider()
    {
        return [
            'otherCommand' =&gt; [
                'commandName'     =&gt; 'doctrine:mapping:info',
                'params'          =&gt; [],
                'expectedContent' =&gt; 'OK'
            ],
            'commandWithoutOption' =&gt; [
                'commandName'     =&gt; 'doctrine:schema:update',
                'params'          =&gt; [],
                'expectedContent' =&gt; 'Please run the operation by passing one - or both - of the following options:'
            ],
            'commandWithAnotherOption' =&gt; [
                'commandName'     =&gt; 'doctrine:schema:update',
                'params'          =&gt; ['--dump-sql' =&gt; true],
                'expectedContent' =&gt; 'ALTER TABLE'
            ],
            'commandWithForceOption' =&gt; [
                'commandName'     =&gt; 'doctrine:schema:update',
                'params'          =&gt; ['--force' =&gt; true],
                'expectedContent' =&gt; 'Schema update and create index completed'
            ]
        ];
    }
}
</code></pre>

<h3 id="voir-aussi">VOIR AUSSI</h3>
<p>Lisez les <a href="https://symfony.com/doc/master/components/console/introduction.html#testing-commands">Test des commandes</a>
dans la documentation officielle pour plus dâinformations sur la faÃ§on de tester les commandes dans une application Symfony.</p>
<h3 id="tester-les-services-ou-les-repositories">Tester les services ou les Repositories</h3>
<p>Pour tester des services ou des dÃ©pÃ´ts, vous pouvez accÃ©der au conteneur de service via la mÃ©thode getContainer()Â :</p>
<pre><code class="php">// src/Oro/Bundle/FooBarBundle/Tests/Functional/FooBarTest.php
namespace Oro\Bundle\FooBarBundle\Tests\Functional;

use Oro\Bundle\TestFrameworkBundle\Test\WebTestCase;

class FooBarTest extends WebTestCase
{
    protected $repositoryOrService;

    protected function setUp()
    {
        $this-&gt;initClient();
        $this-&gt;loadFixtures(['Oro\Bundle\FooBarBundle\Tests\Functional\API\DataFixtures\LoadFooBarData']);
        $this-&gt;repositoryOrService = $this-&gt;getContainer()-&gt;get('repository_or_service_id');
    }

    public function testMethod($commandName, array $params, $expectedContent)
    {
        $expected = 'test';
        $this-&gt;assertEquals($expected, $this-&gt;repositoryOrService-&gt;callTestMethod());
    }
</code></pre>

<h2 id="example-de-test-fonctionnel">Example de test fonctionnel :</h2>
<p>Ceci est un exemple de la faÃ§on dont vous pouvez Ã©crire un test dâintÃ©gration pour une classe qui utilise lâORM de doctrine
sans moquer ses classes et en utilisant de vrais services de DoctrineÂ :</p>
<pre><code class="php">namespace Oro\Bundle\BatchBundle\Tests\Functional\ORM\QueryBuilder;

use Doctrine\ORM\Query\Expr\Join;
use Doctrine\ORM\QueryBuilder;
use Doctrine\ORM\EntityManager;
use Oro\Bundle\BatchBundle\ORM\QueryBuilder\CountQueryBuilderOptimizer;
use Oro\Bundle\TestFrameworkBundle\Test\WebTestCase;

class CountQueryBuilderOptimizerTest extends WebTestCase
{
    /**
     * @dataProvider getCountQueryBuilderDataProvider
     * @param QueryBuilder $queryBuilder
     * @param string $expectedDql
     */
    public function testGetCountQueryBuilder(QueryBuilder $queryBuilder, $expectedDql)
    {
        $optimizer = new CountQueryBuilderOptimizer();
        $countQb = $optimizer-&gt;getCountQueryBuilder($queryBuilder);
        $this-&gt;assertInstanceOf('Doctrine\ORM\QueryBuilder', $countQb);
        // Check for expected DQL
        $this-&gt;assertEquals($expectedDql, $countQb-&gt;getQuery()-&gt;getDQL());
        // Check that Optimized DQL can be converted to SQL
        $this-&gt;assertNotEmpty($countQb-&gt;getQuery()-&gt;getSQL());
    }

    /**
     * @return array
     */
    public function getCountQueryBuilderDataProvider()
    {
        self::initClient();
        $em = self::getContainer()-&gt;get('doctrine.orm.entity_manager');

        return [
            'simple' =&gt; [
                'queryBuilder' =&gt; self::createQueryBuilder($em)
                    -&gt;from('OroUserBundle:User', 'u')
                    -&gt;select(['u.id', 'u.username']),
                'expectedDQL' =&gt; 'SELECT u.id FROM OroUserBundle:User u'
            ],
            'group_test' =&gt; [
                'queryBuilder' =&gt; self::createQueryBuilder($em)
                    -&gt;from('OroUserBundle:User', 'u')
                    -&gt;select(['u.id', 'u.username as uName'])
                    -&gt;groupBy('uName'),
                'expectedDQL' =&gt; 'SELECT u.id, u.username as uName FROM OroUserBundle:User u GROUP BY uName'
            ]
        );
    }

    /**
     * @param EntityManager $entityManager
     * @return QueryBuilder
     */
    public static function createQueryBuilder(EntityManager $entityManager)
    {
        return new QueryBuilder($entityManager);
    }
}
</code></pre>

<h3 id="attention">Attention</h3>
<p>Si votre classe est responsable de la rÃ©cupÃ©ration des donnÃ©es, il est prÃ©fÃ©rable de charger les fixtures et de les rÃ©cupÃ©rer
en utilisant une classe de test, puis dâaffirmer que les rÃ©sultats sont valides. VÃ©rifier le DQL suffit dans ce cas car câest la seule responsabilitÃ© de cette classe de modifier la requÃªte.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../javascript/" title="Javascript" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Javascript
              </div>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.c51dfa35.min.js"></script>
      <script src="../../assets/javascripts/bundle.eaaa3931.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.58d22e8e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>